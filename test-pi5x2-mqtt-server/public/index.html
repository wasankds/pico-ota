<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Robot Web Control</title>
  <link rel="stylesheet" href="index.css">
</head>

<body>

  <h1 class="web-title">EagleEye Robot Control</h1>

  <div class="control-panel">
    
    <div class="group">
      <h3>Wheel Control</h3>
      <div class="d-pad">
        <div class="spacer">1</div>
        <button class="btn-up" onmousedown="wheelControl(event, 'forward')" onmouseup="wheelControl(event, 'stop')"
          onmouseleave="wheelControl(event, 'stop')" ontouchstart="wheelControl(event, 'forward')"
          ontouchend="wheelControl(event, 'stop')">UP</button>
        <div class="spacer">3</div>

        <button class="btn-left" onmousedown="wheelControl(event, 'left')" onmouseup="wheelControl(event, 'stop')"
          onmouseleave="wheelControl(event, 'stop')" ontouchstart="wheelControl(event, 'left')"
          ontouchend="wheelControl(event, 'stop')">LEFT</button>
        <button class="btn-stop" onclick="send('stop')">STOP</button>
        <button class="btn-right" onmousedown="wheelControl(event, 'right')" onmouseup="wheelControl(event, 'stop')"
          onmouseleave="wheelControl(event, 'stop')" ontouchstart="wheelControl(event, 'right')"
          ontouchend="wheelControl(event, 'stop')">RIGHT</button>

        <div class="spacer">7</div>
        <button class="btn-down" onmousedown="wheelControl(event, 'backward')" onmouseup="wheelControl(event, 'stop')"
          onmouseleave="wheelControl(event, 'stop')" ontouchstart="wheelControl(event, 'backward')"
          ontouchend="wheelControl(event, 'stop')">DOWN</button>
        <div class="spacer">9</div>
      </div>
    </div>

    <div class="monitor-area">
      <div class="group">
        <h3>System Control</h3>
        <button id="recBtn" class="btn-record" onclick="toggleRecord()">START RECORD</button>
      </div>

      <div class="monitor-placeholder">
        <img id="mainStream" src="/stream" style="width: 100%; height: auto; border-radius: 10px;" 
            onerror="this.style.display='none'; document.getElementById('streamErr').style.display='block';">
        
        <div id="streamErr" style="display: none; color: #e74c3c; padding: 20px;">
            <p>⚠️ Camera Offline</p>
            <span style="font-size: 0.8em;">Please check Pi Zero connection</span>
        </div>
      </div>
    </div>

    <div class="group">
      <h3>Camera Pan/Tilt</h3>

        <div class="servo-grid">
          <button onclick="emergencyStop()" style="background:#ff0000; color:white;">E-STOP</button>
          <button onmousedown="wheelControl(event, 'tilt_up_start')" onmouseup="send('servo_stop')"
                  ontouchstart="wheelControl(event, 'tilt_up_start')" ontouchend="send('servo_stop')">TILT UP</button>
          <div class="spacer"></div>

          <button onmousedown="wheelControl(event, 'pan_left_start')" onmouseup="send('servo_stop')"
                  ontouchstart="wheelControl(event, 'pan_left_start')" ontouchend="send('servo_stop')">PAN L</button>
          <button class="btn-center" onclick="resetServo()">CENTER</button>
          <button onmousedown="wheelControl(event, 'pan_right_start')" onmouseup="send('servo_stop')"
                  ontouchstart="wheelControl(event, 'pan_right_start')" ontouchend="send('servo_stop')">PAN R</button>

          <div class="spacer"></div>
          <button onmousedown="wheelControl(event, 'tilt_down_start')" onmouseup="send('servo_stop')"
                  ontouchstart="wheelControl(event, 'tilt_down_start')" ontouchend="send('servo_stop')">TILT DN</button>
          <div class="spacer"></div>
        </div>

    </div>

  </div>

  <div class="status" id="stat">Broker: Connected</div>

  <script src="index.js"></script>
</body>

</html>