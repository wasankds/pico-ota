""" 

ใช้สายไฟ 2 เส้น
- ขาที่ 1 ของสวิตช์: จิ้มเข้าขา GP15
- ขาที่ 2 ของสวิตช์: จิ้มเข้าขา GND (จุดไหนก็ได้)

button = Pin(15, Pin.IN, Pin.PULL_UP)

"""

import machine
import time
from machine import Pin

# 1. ตั้งค่า LED บนบอร์ดไว้ดูผล
led = Pin("LED", Pin.OUT)

# 2. ตั้งค่าปุ่มกดที่ขา GP15 แบบ Active Low (เปิด PULL_UP ภายใน)
""" 
Pin(15, ...) บอก Pico ว่า "ฉันจะคุยกับ ขาหมายเลข 15 นะ"
Pin.IN - ตั้งโหมดให้ขานี้เป็น "ขาเข้า" (Input) ให้คอย "ฟัง" หรือ "อ่าน" ค่าที่วิ่งเข้ามาที่ขานี้
Pin.PULL_UP (ตัวพระเอก) 
- บรรทัดนี้ที่ทำให้เกิด Active Low โดยไม่ต้องต่อตัวต้านทานข้างนอก
- ข้างในชิป Pico: เมื่อสั่ง PULL_UP มันจะไป "สับสวิตช์" เชื่อมต่อตัวต้านทานภายใน (Internal Resistor) เข้ากับแหล่งจ่ายไฟ 3.3V ของตัวบอร์ดเอง
- สิ่งที่เกิดขึ้น: Pico จะทำการ "ดึง" (Pull) แรงดันที่ขา 15 ให้ขึ้นไปอยู่ที่ High (3.3V) ตลอดเวลาโดยอัตโนมัติ 
"""
button = Pin(15, Pin.IN, Pin.PULL_UP)

print("--- เริ่มการทดสอบปุ่มกด (Active Low) ---")
print("สถานะปกติ: ไฟ LED จะดับ (ค่าอ่านได้ 1)")
print("เมื่อกดปุ่ม: ไฟ LED จะติด (ค่าอ่านได้ 0)")

while True:
    # อ่านค่าจากปุ่ม (ไม่กดได้ 1, กดได้ 0)
    button_value = button.value()
    
    if button_value == 0:
      # ถ้ากดปุ่ม (Active Low) ให้เปิดไฟ LED
      led.value(1)
      print("Status: Pressed (0)  -> LED ON")
    else:
      # ถ้าไม่กด ให้ปิดไฟ LED
      led.value(0)   
    
    # หน่วงเวลานิดหน่อยเพื่อให้มองทันและไม่รันรัวเกินไป
    time.sleep(0.1)
